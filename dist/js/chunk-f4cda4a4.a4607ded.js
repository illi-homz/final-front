(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4cda4a4"],{"9b7c":function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"gotest"},[e("b-row",[e("b-col",{staticClass:"mx-auto",attrs:{cols:"11",xl:"9"}},[e("b-row",{staticClass:"mx-3"},[e("b-col",{staticClass:"px-0",attrs:{cols:"8"}},[e("h4",{staticClass:"text-left mt-2"},[t._v(" Всего баллов: "),e("b",[t._v(t._s(t.totalPoints))]),t._v(" Набрано Вами: "),e("b",[t._v(t._s(t.userPoints))])])]),e("b-col",{staticClass:"px-0"},[e("h4",{staticClass:"text-right mt-2"},[t._v(" Время на вопрос: "),e("b",[t._v(t._s(t.timeOnQuestion))])])])],1),t.test?e("b-jumbotron",{staticClass:"mx-3 mt-1 py-3",attrs:{"bg-variant":"info","border-variant":"dark"}},[e("b-row",{staticClass:"my-3"},[e("b-col",[e("b-card",{attrs:{"no-body":""}},[e("b-tabs",{attrs:{pills:"",card:""}},t._l(t.questions,(function(s,n){return e("b-tab",{key:s.id,attrs:{title:"Вопрос "+(n+1),disabled:t.disabledQuestions[n]}},[1==t.result?e("h2",{staticClass:"text-center text-success"},[t._v("ВЕРНО")]):2==t.result?e("h2",{staticClass:"text-center text-danger"},[t._v("НЕ ВЕРНО")]):3==t.result?e("h2",{staticClass:"text-center text-danger"},[t._v("ВРЕМЯ ВЫШЛО")]):t._e(),e("b-card-text",[t._v(t._s(s.question.question))]),e("b-card-text",[e("b-form",{on:{submit:function(t){t.preventDefault()}}},["input"==s.question.qtype?e("b-row",{staticClass:"mb-4"},[s.question.img?e("b-col",{attrs:{cols:"3"}},[e("b-img",{attrs:{src:""+s.question.img,fluid:"",alt:"Responsive image"}})],1):t._e(),e("b-col",[e("b-form-input",{attrs:{placeholder:"Введите ответ"},model:{value:t.results[n].answer,callback:function(s){t.$set(t.results[n],"answer",s)},expression:"results[index].answer"}})],1)],1):"checkbox"==s.question.qtype?e("b-row",{staticClass:"mb-4"},[s.question.img?e("b-col",{attrs:{cols:"3"}},[e("b-img",{attrs:{src:""+s.question.img,fluid:"",alt:"Responsive image"}})],1):t._e(),e("b-col",t._l(s.question.variants,(function(s,i){return e("b-form-checkbox",{key:i,attrs:{value:""+s.value},model:{value:t.results[n].answer,callback:function(s){t.$set(t.results[n],"answer",s)},expression:"results[index].answer"}},[t._v(" "+t._s(s.value)+" ")])})),1)],1):"radio"==s.question.qtype?e("b-row",{staticClass:"mb-4"},[s.question.img?e("b-col",{attrs:{cols:"3"}},[e("b-img",{attrs:{src:""+s.question.img,fluid:"",alt:"Responsive image"}})],1):t._e(),e("b-col",t._l(s.question.variants,(function(s,i){return e("b-form-radio",{key:i,attrs:{value:""+s.value},model:{value:t.results[n].answer,callback:function(s){t.$set(t.results[n],"answer",s)},expression:"results[index].answer"}},[t._v(" "+t._s(s.value)+" ")])})),1)],1):t._e(),e("b-button",{attrs:{type:"submit",variant:"success"},on:{click:function(e){return t.onSubmit(n,s.question.qtype)}}},[t._v("Ответить")])],1)],1)],1)})),1)],1)],1)],1)],1):e("p",[t._v(" loading.....")])],1)],1)],1)},i=[],o=(e("99af"),e("c975"),e("bc3a")),r=e.n(o),a="https://testing-gomza-back.herokuapp.com",u={name:"GoTest",data:function(){return{disabledQuestions:[],test:null,questions:[],start_date:null,end_date:null,results:[],result:0,totalPoints:0,userPoints:0,timeOnQuestion:0,interval:null,currentIndex:0,userID:0}},methods:{setConfig:function(){var t=this.$cookies.get("jwt_token"),s={headers:{"X-CSRFToken":this.$cookies.get("csrftoken"),Authorization:"Bearer ".concat(t)}};return s},questionTimer:function(){var t=this;this.interval=setInterval((function(){if(t.timeOnQuestion>0)t.timeOnQuestion-=1;else{t.result=3,clearInterval(t.interval);var s=t.questions[t.currentIndex].question.qtype;t.onSubmit(t.currentIndex,s,3)}}),1e3)},checkInput:function(t,s){var e=t;return this.results.push({user:this.userID,answer:"",question:s}),e},checkRaio:function(t,s){var e=t;return e.variants=JSON.parse(e.variants),this.results.push({user:this.userID,answer:"",question:s}),e},checkCheckbox:function(t,s){var e=t;return e.answer=JSON.parse(e.answer),e.variants=JSON.parse(e.variants),this.results.push({user:this.userID,answer:[],question:s}),e},getTest:function(){var t=this,s=this.setConfig(),e="".concat(this.$route.params.id);r.a.get("".concat(a,"/tests/").concat(e,"/"),s).then((function(s){if(t.test=s.data,t.timeOnQuestion=t.test.time_on_question,t.test.groups.length>0)for(var e=0;e<t.test.groups.length;e+=1)for(var n=t.test.groups[e],i=0;i<n.group.questions.length;i+=1)t.questions.push({id:n.id,price:n.price,question:n.group.questions[i]});else t.questions=s.data.questions;for(var o=0;o<t.questions.length;o+=1){var r=t.questions[o];switch(r.question.qtype){case"input":r.question=t.checkInput(r.question,r.question.id);break;case"radio":r.question=t.checkRaio(r.question,r.question.id);break;case"checkbox":r.question=t.checkCheckbox(r.question,r.question.id);break;default:console.log("Unexpected type of question")}t.totalPoints+=r.price}})),this.questionTimer()},showResult:function(t,s,e){t?(this.result=1,this.userPoints+=this.questions[s].price):this.result=e||2},checkInputAndRadioAnsvers:function(t,s){var e=this.results[t].answer.toLowerCase(),n=this.questions[t].question.answer.toLowerCase();this.showResult(e===n,t,s)},checkCheckboxAnsver:function(t,s){for(var e=this.results[t].answer,n=this.questions[t].question.answer,i=0,o=n.length,r=0;r<e.length;r+=1)-1!==n.indexOf(e[r])&&(i+=1);this.showResult(i===o,t,s)},onSubmit:function(t,s){var e=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(s){case"input":case"radio":this.checkInputAndRadioAnsvers(t,n);break;case"checkbox":this.checkCheckboxAnsver(t,n);break;default:console.log("Unexpected type of question")}setTimeout((function(){e.$set(e.disabledQuestions,t-1,!0),e.$set(e.disabledQuestions,t,!0),e.$set(e.disabledQuestions,t+1,!1),e.result=0}),1e3),this.currentIndex+=1,this.currentIndex<this.questions.length?(this.timeOnQuestion=this.test.time_on_question,clearInterval(this.interval),this.questionTimer()):(clearInterval(this.interval),setTimeout((function(){e.timeOnQuestion=0,e.sendResults()}),1e3))},sendResults:function(){var t=this,s=this.setConfig(),e={user:this.userID,test:this.test.id,answers:JSON.stringify(this.results)};r.a.post("".concat(a,"/results/"),e,s).then((function(s){t.$router.push("/results/".concat(s.data.id))}))}},mounted:function(){this.getTest(),this.userID=this.$cookies.get("user_id")}},c=u,l=e("2877"),h=Object(l["a"])(c,n,i,!1,null,null,null);s["default"]=h.exports},a640:function(t,s,e){"use strict";var n=e("d039");t.exports=function(t,s){var e=[][t];return!!e&&n((function(){e.call(null,s||function(){throw 1},1)}))}},c975:function(t,s,e){"use strict";var n=e("23e7"),i=e("4d64").indexOf,o=e("a640"),r=e("ae40"),a=[].indexOf,u=!!a&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=r("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-f4cda4a4.a4607ded.js.map